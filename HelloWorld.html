<!DOCTYPE html>
<html>
<head>
    <title>Hello Cocos2d-JS</title>
</head>
<body>   
    <canvas id="gameCanvas" width="800" height="450"></canvas>
    <script type="text/javascript" src="cocos2d-js-v3.13.js" charset="UTF-8"></script>
    <script type="text/javascript">
          window.onload = function(){
              cc.game.onStart = function(){
                  //load resources
                  cc.LoaderScene.preload(["HelloWorld.png"], function () {
                      var MyScene = cc.Scene.extend({
                          onEnter:function () {
                              this._super();
                              var size = cc.director.getWinSize();

                              var node = new cc.DrawNode();

                              var element_width = 40;
                              var elements = [3,4,1,2,4];
                              var select_index = 0;
                              var num_elements = elements.length;

                              //var vecs = [new cc.math.Vec2(0, 0), new cc.math.Vec2(0, 10), new cc.math.Vec2(100, 10), new cc.math.Vec2(100, 0)];
                              //node.drawPoly(vecs, cc.color(0, 0, 0, 0), 1, cc.color(0, 0, 0));
                              node.drawSegment(new cc.math.Vec2(1, size.height / 2 - element_width / 2), new cc.math.Vec2(1 + element_width * num_elements, size.height / 2 - element_width / 2), 1, new cc.Color(255, 0, 0));
                              node.drawSegment(new cc.math.Vec2(1, size.height / 2 + element_width / 2), new cc.math.Vec2(1 + element_width * num_elements, size.height / 2 + element_width / 2), 1, new cc.Color(255, 0, 0));
                              for (var i = 0; i <= num_elements; ++i) {
                                  node.drawSegment(new cc.math.Vec2(1 + i * element_width, size.height / 2 - element_width / 2), new cc.math.Vec2(1 + i * element_width, size.height / 2 + element_width / 2), 1, new cc.Color(255, 0, 0));
                              }

                              this.addChild(node, 1);

                              var node2 = new cc.DrawNode();
                              node2.drawSegment(new cc.math.Vec2((2 + (2*select_index+1) * element_width) / 2, size.height / 2 + element_width / 2 + 3), new cc.math.Vec2((2 + (2*select_index+1) * element_width) / 2, size.height / 2 + element_width * 3 / 2), 1, new cc.Color(255, 0, 0));
                              node2.drawSegment(new cc.math.Vec2((2 + (2*select_index+1) * element_width) / 2, size.height / 2 + element_width / 2 + 3), new cc.math.Vec2(1 + select_index * element_width + 5, size.height / 2 + element_width), 1, new cc.Color(255, 0, 0));
                              node2.drawSegment(new cc.math.Vec2((2 + (2*select_index+1) * element_width) / 2, size.height / 2 + element_width / 2 + 3), new cc.math.Vec2(1 + (select_index+1) * element_width - 5, size.height / 2 + element_width), 1, new cc.Color(255, 0, 0));

                              var animation = cc.MoveBy.create(1, element_width, 0);

                              this.schedule(function () {
                                  console.log(arguments);
                                  node2.runAction(animation);
                              }, 3, 1, 5);

                              this.addChild(node2, 2);

                              for (var i = 0; i < num_elements; ++i) {
                                  var label = cc.LabelTTF.create(`${elements[i]}`, "Arial", 40);
                                  label.setColor(new cc.Color(1, 1, 1));
                                  //label.setPosition((2 + (2*i+1) * element_width) / 2 * size.height, size.height / 2 - element_width / 2);
                                  console.log(label);
                                  label.setPosition((2 + (2*i+1) * element_width) / 2, size.height / 2);
                                  this.addChild(label, 3);
                              }


                          }
                      });
                      cc.director.runScene(new MyScene());
                  }, this);
              };
              cc.game.run("gameCanvas");
          };
    </script>
</body>
</html>